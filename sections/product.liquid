{% comment %}
  Product Section
  Main product template section
{% endcomment %}

<section class="product_main_section u-section">
  <div class="product_main_contain u-container">
    <div class="product_main_layout u-grid-custom" data-large-columns="2">
      {% comment %} Product Images {% endcomment %}
      <div class="product_gallery">
        <div class="product_main_image_wrap">
          {%- if product.featured_image != blank -%}
            <img
              src="{{ product.featured_image | image_url: width: 800 }}"
              alt="{{ product.featured_image.alt | default: product.title }}"
              class="product_main_image"
              loading="eager"
              width="{{ product.featured_image.width }}"
              height="{{ product.featured_image.height }}"
            >
          {%- else -%}
            {{ 'product-1' | placeholder_svg_tag: 'product_main_image placeholder' }}
          {%- endif -%}
        </div>

        {%- if product.images.size > 1 -%}
          <div class="product_thumbnails">
            {%- for image in product.images -%}
              <button class="product_thumbnail{% if forloop.first %} is-active{% endif %}" data-image-id="{{ image.id }}">
                <img
                  src="{{ image | image_url: width: 100 }}"
                  alt="{{ image.alt | default: product.title }}"
                  loading="lazy"
                  width="100"
                  height="100"
                >
              </button>
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>

      {% comment %} Product Info {% endcomment %}
      <div class="product_info_wrap">
        <h1 class="product_main_title u-text-style-h1">{{ product.title }}</h1>

        <div class="product_main_price">
          {%- if product.compare_at_price > product.price -%}
            <span class="product_compare_price u-text-style-large">{{ product.compare_at_price | money }}</span>
          {%- endif -%}
          <span class="product_current_price u-text-style-h3">{{ product.price | money }}</span>
        </div>

        {%- if product.description != blank -%}
          <div class="product_description u-text-style-small">
            {{ product.description }}
          </div>
        {%- endif -%}

        {%- form 'product', product -%}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">

          {%- unless product.has_only_default_variant -%}
            <div class="product_variants">
              {%- for option in product.options_with_values -%}
                <div class="product_option">
                  <label class="product_option_label u-text-style-small" for="Option-{{ option.name | handleize }}">
                    {{ option.name }}
                  </label>
                  <select
                    id="Option-{{ option.name | handleize }}"
                    class="product_option_select"
                    name="options[{{ option.name }}]"
                  >
                    {%- for value in option.values -%}
                      <option
                        value="{{ value }}"
                        {% if option.selected_value == value %}selected{% endif %}
                      >
                        {{ value }}
                      </option>
                    {%- endfor -%}
                  </select>
                </div>
              {%- endfor -%}
            </div>
          {%- endunless -%}

          <div class="product_quantity">
            <label class="product_quantity_label u-text-style-small" for="Quantity">
              {{ 'products.product.quantity.label' | t }}
            </label>
            <div class="product_quantity_wrap">
              <button type="button" class="product_quantity_btn" data-action="decrease">-</button>
              <input
                type="number"
                id="Quantity"
                name="quantity"
                value="1"
                min="1"
                class="product_quantity_input"
              >
              <button type="button" class="product_quantity_btn" data-action="increase">+</button>
            </div>
          </div>

          <button
            type="submit"
            name="add"
            class="product_add_btn button_main"
            {% unless product.available %}disabled{% endunless %}
          >
            {%- if product.available -%}
              {{ 'products.product.add_to_cart' | t }}
            {%- else -%}
              {{ 'products.product.sold_out' | t }}
            {%- endif -%}
          </button>
        {%- endform -%}
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Quantity buttons
    document.querySelectorAll('.product_quantity_btn').forEach(function(btn) {
      btn.addEventListener('click', function() {
        var input = this.parentNode.querySelector('.product_quantity_input');
        var value = parseInt(input.value);
        if (this.dataset.action === 'increase') {
          input.value = value + 1;
        } else if (this.dataset.action === 'decrease' && value > 1) {
          input.value = value - 1;
        }
      });
    });
  });
</script>

{% schema %}
{
  "name": "Product",
  "settings": [],
  "presets": [
    {
      "name": "Product"
    }
  ]
}
{% endschema %}
